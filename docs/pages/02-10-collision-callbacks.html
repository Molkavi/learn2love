
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>2.10 - Collision callbacks · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="02-11-breakout-part-1.html" />
    
    
    <link rel="prev" href="02-09-modules-and-organization.html" />
    

    <script src="../gitbook/gitbook-plugin-graph/d3.min.js"></script>
    <script src="../gitbook/gitbook-plugin-graph/function-plot.js"></script>    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="01-00-programming-basics.html">
            
                <a href="01-00-programming-basics.html">
            
                    
                    1.0 - Programming basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="01-01-interactive-coding.html">
            
                <a href="01-01-interactive-coding.html">
            
                    
                    1.1 - Interactive coding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="01-02-strings.html">
            
                <a href="01-02-strings.html">
            
                    
                    1.2 - Strings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="01-03-nil-and-variables.html">
            
                <a href="01-03-nil-and-variables.html">
            
                    
                    1.3 - Nil and variables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="01-04-using-functions.html">
            
                <a href="01-04-using-functions.html">
            
                    
                    1.4 - Using functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="01-05-comments-in-code.html">
            
                <a href="01-05-comments-in-code.html">
            
                    
                    1.5 - Comments in code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="01-06-scripting-and-printing.html">
            
                <a href="01-06-scripting-and-printing.html">
            
                    
                    1.6 - Scripting and printing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="01-07-making-functions.html">
            
                <a href="01-07-making-functions.html">
            
                    
                    1.7 - Making functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="01-08-booleans.html">
            
                <a href="01-08-booleans.html">
            
                    
                    1.8 - Booleans
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="01-09-flow-control.html">
            
                <a href="01-09-flow-control.html">
            
                    
                    1.9 - Flow control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="01-10-while.html">
            
                <a href="01-10-while.html">
            
                    
                    1.10 - While
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.11" data-path="01-11-type-checking.html">
            
                <a href="01-11-type-checking.html">
            
                    
                    1.11 - Type checking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.12" data-path="01-12-first-game.html">
            
                <a href="01-12-first-game.html">
            
                    
                    1.12 - First game
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.13" data-path="01-13-tables-1.html">
            
                <a href="01-13-tables-1.html">
            
                    
                    1.13 - Tables (part 1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.14" data-path="01-14-tables-2.html">
            
                <a href="01-14-tables-2.html">
            
                    
                    1.14 - Tables (part 2)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.15" data-path="01-15-for-loops-1.html">
            
                <a href="01-15-for-loops-1.html">
            
                    
                    1.15 - For loops (part 1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.16" data-path="01-16-for-loops-2.html">
            
                <a href="01-16-for-loops-2.html">
            
                    
                    1.16 - For loops (part 2)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.17" data-path="01-17-scopes.html">
            
                <a href="01-17-scopes.html">
            
                    
                    1.17 - Scopes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.18" data-path="01-18-chapter-review.html">
            
                <a href="01-18-chapter-review.html">
            
                    
                    1.18 - Chapter review
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="02-00-introducing-love.html">
            
                <a href="02-00-introducing-love.html">
            
                    
                    2.0 - Introducing LÖVE
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="02-01-up-and-running.html">
            
                <a href="02-01-up-and-running.html">
            
                    
                    2.1 - Up and running
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="02-02-love-structure.html">
            
                <a href="02-02-love-structure.html">
            
                    
                    2.2 - LÖVE structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="02-03-geometry.html">
            
                <a href="02-03-geometry.html">
            
                    
                    2.3 - Geometry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="02-04-game-loop.html">
            
                <a href="02-04-game-loop.html">
            
                    
                    2.4 - Game loop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="02-05-delta-time.html">
            
                <a href="02-05-delta-time.html">
            
                    
                    2.5 - Delta time
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="02-06-mapping.html">
            
                <a href="02-06-mapping.html">
            
                    
                    2.6 - Mapping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="02-07-the-world.html">
            
                <a href="02-07-the-world.html">
            
                    
                    2.7 - The world
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="02-08-reading-documentation.html">
            
                <a href="02-08-reading-documentation.html">
            
                    
                    2.8 - Reading documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="02-09-modules-and-organization.html">
            
                <a href="02-09-modules-and-organization.html">
            
                    
                    2.9 - Modules and organization
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.10" data-path="02-10-collision-callbacks.html">
            
                <a href="02-10-collision-callbacks.html">
            
                    
                    2.10 - Collision callbacks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="02-11-breakout-part-1.html">
            
                <a href="02-11-breakout-part-1.html">
            
                    
                    2.11 - Breakout (part 1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="02-12-breakout-part-2.html">
            
                <a href="02-12-breakout-part-2.html">
            
                    
                    2.12 - Breakout (part 2)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.13" data-path="02-13-breakout-part-3.html">
            
                <a href="02-13-breakout-part-3.html">
            
                    
                    2.13 - Breakout (part 3)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.14" data-path="02-14-breakout-part-4.html">
            
                <a href="02-14-breakout-part-4.html">
            
                    
                    2.14 - Breakout (part 4)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.15" data-path="02-15-breakout-part-5.html">
            
                <a href="02-15-breakout-part-5.html">
            
                    
                    2.15 - Breakout (part 5)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.16" data-path="02-16-binary-and-bitmasks.html">
            
                <a href="02-16-binary-and-bitmasks.html">
            
                    
                    2.16 - Binary and bitmasks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="03-00-programming-in-depth.html">
            
                <a href="03-00-programming-in-depth.html">
            
                    
                    3.0 - Programming in-depth
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="03-01-primitives-and-references.html">
            
                <a href="03-01-primitives-and-references.html">
            
                    
                    3.01 - Primitives and references
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="03-02-higher-order-functions.html">
            
                <a href="03-02-higher-order-functions.html">
            
                    
                    3.02 - Higher-order functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="03-03-map-and-filter.html">
            
                <a href="03-03-map-and-filter.html">
            
                    
                    3.03 - Map and filter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="03-04-stack-and-recursion.html">
            
                <a href="03-04-stack-and-recursion.html">
            
                    
                    3.04 - Stack and recursion
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >2.10 - Collision callbacks</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="collision-callbacks">Collision callbacks</h1>
<p>When writing a game such as a platformer you may want something special to happen when two objects collide.
If it&apos;s a powerup, for instance, you may want the powerup to <em>despawn</em> (be removed from the world) if a player touches it and then give the player a special ability (think Mario and mushrooms).
If a player and an enemy bump into each other, you may want the player&apos;s health to decrement.
The <em>world</em> table has a method that allows you to program in functionality like this for when two entities collide.
It does this by allowing you to create callbacks as we learned before, but these callbacks are triggered before, during, or after collision.
Take a look at <a href="https://love2d.org/wiki/World:setCallbacks" target="_blank">World:setCallbacks</a>.</p>
<p>If you look at the parameters for <code>World:setCallbacks</code>, you see it can take four functions.
The description of these parameters helps explain when the functions will be called.
<code>beginContact</code> and <code>endContact</code> should be self explanatory; They happen at the point where contact begins and ends in a collision, but <code>preSolve</code> and <code>postSolve</code> may not be as obvious.
Nonetheless, let&apos;s edit the previously-created <strong>world.lua</strong> file and write some collision callbacks to test this functionality.</p>
<pre><code class="lang-lua"><span class="hljs-comment">-- world.lua</span>

<span class="hljs-keyword">local</span> begin_contact_counter = <span class="hljs-number">0</span>
<span class="hljs-keyword">local</span> end_contact_counter = <span class="hljs-number">0</span>
<span class="hljs-keyword">local</span> pre_solve_counter = <span class="hljs-number">0</span>
<span class="hljs-keyword">local</span> post_solve_counter = <span class="hljs-number">0</span>

<span class="hljs-keyword">local</span> begin_contact_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  begin_contact_counter = begin_contact_counter + <span class="hljs-number">1</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;beginContact called &apos;</span> .. begin_contact_counter .. <span class="hljs-string">&apos; times&apos;</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> end_contact_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  end_contact_counter = end_contact_counter + <span class="hljs-number">1</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;endContact called &apos;</span> .. end_contact_counter .. <span class="hljs-string">&apos; times&apos;</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> pre_solve_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  pre_solve_counter = pre_solve_counter + <span class="hljs-number">1</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;preSolve called &apos;</span> .. pre_solve_counter .. <span class="hljs-string">&apos; times&apos;</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> post_solve_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  post_solve_counter = post_solve_counter + <span class="hljs-number">1</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;postSolve called &apos;</span> .. post_solve_counter .. <span class="hljs-string">&apos; times&apos;</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> world = love.physics.newWorld(<span class="hljs-number">0</span>, <span class="hljs-number">9.81</span> * <span class="hljs-number">128</span>)

world:setCallbacks(
  begin_contact_callback,
  end_contact_callback,
  pre_solve_callback,
  post_solve_callback
)

<span class="hljs-keyword">return</span> world
</code></pre>
<p>Try it out.
Every time one of the callbacks is invoked, it will increment its own number by 1 then print a message to the console telling you how many times it has been invoked.
It&apos;s clear right away that <code>pre_solve_callback</code> and <code>post_solve_callback</code> get invoked many more times than <code>begin_contact_callback</code> and <code>end_contact_callback</code> in this situation.</p>
<p>Unless you&apos;ve edited the behavior of the triangle entity, it will bounce a bit (because of the triangle&apos;s restitution).
Once it bounces and neither corner or side is touching the floor underneath, the contact ends.
This process is repeated every time it bounces.
Once the triangle settles down it will slide a bit, maybe even a lot... like an air hockey puck.
This is because our triangle and bar have no friction between them to prevent that.
Anyways, this is good because it allows us to see that while the triangle is sliding it is still making contact.
While the triangle is sliding and still making contact, the <code>pre_solve_callback</code> and <code>post_solve_callback</code> will continue to get called with every frame of movement.</p>
<p>Pretend our triangle was a futuristic race car moving across a neon strip of road that recharged the vehicle.
You could start increasing the race car&apos;s power meter inside <code>begin_contact_callback</code> as the car makes contact with that section of road and then stop increasing power when <code>end_contact_callback</code> is invoked.
This could work pretty well, but then the player may try parking for a moment on the power strip and continue to gain health as long as they want.
So another approach could be to only increase the power meter as the player continues to move <em>and</em> make contact with the road, increasing health by 1 point every time the <code>post_solve_callback</code> function is invoked.</p>
<p>You don&apos;t necessarily need to use all of these callbacks, so you could just pass in an empty function or <code>nil</code> to <code>World:setCallbacks</code> for the arguments you don&apos;t need.</p>
<p>Without knowing what entities are colliding, the collision callbacks aren&apos;t very useful.
Luckily, our callbacks have parameters of their own that we can access.
Let&apos;s modify the code again and check out those parameters:</p>
<pre><code class="lang-lua"><span class="hljs-comment">-- world.lua</span>

<span class="hljs-comment">-- Called at the beginning of any contact in the world. Parameters:</span>
<span class="hljs-comment">-- {fixture} fixture_a - first fixture object in the collision.</span>
<span class="hljs-comment">-- {fixture} fixture_b - second fixture object in the collision.</span>
<span class="hljs-comment">-- {contact} contact - world object created on and at the point of</span>
<span class="hljs-comment">--   contact. When sliding along an object, there may be several.</span>
<span class="hljs-comment">--   See further: https://love2d.org/wiki/Contact</span>
<span class="hljs-keyword">local</span> begin_contact_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fixture_a, fixture_b, contact)</span></span>
  <span class="hljs-built_in">print</span>(fixture_a, fixture_b, contact, <span class="hljs-string">&apos;beginning contact&apos;</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> end_contact_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fixture_a, fixture_b, contact)</span></span>
  <span class="hljs-built_in">print</span>(fixture_a, fixture_b, contact, <span class="hljs-string">&apos;ending contact&apos;</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> pre_solve_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fixture_a, fixture_b, contact)</span></span>
  <span class="hljs-built_in">print</span>(fixture_a, fixture_b, contact, <span class="hljs-string">&apos;about to resolve a contact&apos;</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> post_solve_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fixture_a, fixture_b, contact)</span></span>
  <span class="hljs-built_in">print</span>(fixture_a, fixture_b, contact, <span class="hljs-string">&apos;just resolved a contact&apos;</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> world = love.physics.newWorld(<span class="hljs-number">0</span>, <span class="hljs-number">9.81</span> * <span class="hljs-number">128</span>)

world:setCallbacks(
  begin_contact_callback,
  end_contact_callback,
  pre_solve_callback,
  post_solve_callback
)

<span class="hljs-keyword">return</span> world
</code></pre>
<p>This should print out some information in the console similar to:</p>
<pre><code>Fixture: 0x561020bf8570 Fixture: 0x561020bf7350 Contact: 0x561020bf7480 beginning collision
Fixture: 0x561020bf8570 Fixture: 0x561020bf7350 Contact: 0x561020bf7480 about to resolve a contact
Fixture: 0x561020bf8570 Fixture: 0x561020bf7350 Contact: 0x561020bf7480 just resolved a contact
Fixture: 0x561020bf8570 Fixture: 0x561020bf7350 Contact: 0x561020bf7480 ending collision
</code></pre><p><code>Fixture: 0x561020bf8570</code> is a text representation of our first entity&apos;s fixture.
The <code>0x56...</code> is the memory address of the fixture to help identify it, although this information still doesn&apos;t tell us which entity this fixture belongs to.
We also printed out a <a href="https://love2d.org/wiki/Contact" target="_blank">contact table</a>, which contains a set of functions just like the entities.
This instance of a contact provides information such as where the contact happened and how much velocity was involved.</p>
<p>Let&apos;s work on modifying the print statements so we can collect more useful information on these collisions.
There is a pair of functions on every fixture that let&apos;s you set any arbitrary data you want on that fixture and another function to get that data back out the fixture.
These functions are called <a href="https://love2d.org/wiki/Fixture:setUserData" target="_blank"><code>Fixture:setUserData</code></a> and <a href="https://love2d.org/wiki/Fixture:getUserData" target="_blank"><code>Fixture:getUserData</code></a>.
These functions can be used to set a name or ID on the fixture to help us identify what entity it belongs to.
We can accomplish this by first modifying our entity files and passing some strings to <code>Fixture:setUserData</code>:</p>
<pre><code class="lang-lua"><span class="hljs-comment">-- entities/bar.lua</span>

<span class="hljs-keyword">local</span> world = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;world&apos;</span>)

<span class="hljs-keyword">local</span> bar = {}
bar.body = love.physics.newBody(world, <span class="hljs-number">200</span>, <span class="hljs-number">450</span>, <span class="hljs-string">&apos;static&apos;</span>)
bar.shape = love.physics.newPolygonShape(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">20</span>, <span class="hljs-number">400</span>, <span class="hljs-number">20</span>, <span class="hljs-number">400</span>, <span class="hljs-number">0</span>)
bar.fixture = love.physics.newFixture(bar.body, bar.shape)
bar.fixture:setUserData(<span class="hljs-string">&apos;bar&apos;</span>)

<span class="hljs-keyword">return</span> bar
</code></pre>
<pre><code class="lang-lua"><span class="hljs-comment">-- entities/triangle.lua</span>

<span class="hljs-keyword">local</span> world = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;world&apos;</span>)

<span class="hljs-keyword">local</span> triangle = {}
triangle.body = love.physics.newBody(world, <span class="hljs-number">200</span>, <span class="hljs-number">200</span>, <span class="hljs-string">&apos;dynamic&apos;</span>)
triangle.body.setMass(triangle.body, <span class="hljs-number">32</span>)
triangle.shape = love.physics.newPolygonShape(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">200</span>)
triangle.fixture = love.physics.newFixture(triangle.body, triangle.shape)
triangle.fixture:setRestitution(<span class="hljs-number">0.75</span>)
triangle.fixture:setUserData(<span class="hljs-string">&apos;triangle&apos;</span>)

<span class="hljs-keyword">return</span> triangle
</code></pre>
<p>Now go back to the world&apos;s collision callbacks and you can easily extract this information back out of the fixtures:</p>
<pre><code class="lang-lua"><span class="hljs-comment">-- world.lua</span>

<span class="hljs-comment">-- Called at the beginning of any contact in the world. Parameters:</span>
<span class="hljs-comment">-- {fixture} fixture_a - first fixture object in the collision.</span>
<span class="hljs-comment">-- {fixture} fixture_b - second fixture object in the collision.</span>
<span class="hljs-comment">-- {contact} contact - world object created on and at the point of</span>
<span class="hljs-comment">--   contact. When sliding along an object, there may be several.</span>
<span class="hljs-comment">--   See further: https://love2d.org/wiki/Contact</span>
<span class="hljs-keyword">local</span> begin_contact_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fixture_a, fixture_b, contact)</span></span>
  <span class="hljs-keyword">local</span> name_a = fixture_a:getUserData()
  <span class="hljs-keyword">local</span> name_b = fixture_b:getUserData()

  <span class="hljs-built_in">print</span>(name_a, name_b, contact, <span class="hljs-string">&apos;beginning contact&apos;</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> end_contact_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fixture_a, fixture_b, contact)</span></span>
  <span class="hljs-keyword">local</span> name_a = fixture_a:getUserData()
  <span class="hljs-keyword">local</span> name_b = fixture_b:getUserData()

  <span class="hljs-built_in">print</span>(name_a, name_b, contact, <span class="hljs-string">&apos;ending contact&apos;</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> pre_solve_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fixture_a, fixture_b, contact)</span></span>
  <span class="hljs-keyword">local</span> name_a = fixture_a:getUserData()
  <span class="hljs-keyword">local</span> name_b = fixture_b:getUserData()

  <span class="hljs-built_in">print</span>(name_a, name_b, contact, <span class="hljs-string">&apos;about to resolve a contact&apos;</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> post_solve_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fixture_a, fixture_b, contact)</span></span>
  <span class="hljs-keyword">local</span> name_a = fixture_a:getUserData()
  <span class="hljs-keyword">local</span> name_b = fixture_b:getUserData()

  <span class="hljs-built_in">print</span>(name_a, name_b, contact, <span class="hljs-string">&apos;just resolved a contact&apos;</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> world = love.physics.newWorld(<span class="hljs-number">0</span>, <span class="hljs-number">9.81</span> * <span class="hljs-number">128</span>)

world:setCallbacks(
  begin_contact_callback,
  end_contact_callback,
  pre_solve_callback,
  post_solve_callback
)

<span class="hljs-keyword">return</span> world
</code></pre>
<p>Ah, now we can see which fixture is colliding which!</p>
<pre><code>bar     triangle        Contact: 0x55bf29c07590 beginning contact
bar     triangle        Contact: 0x55bf29c07590 about to resolve a contact
bar     triangle        Contact: 0x55bf29c07590 just resolved a contact
bar     triangle        Contact: 0x55bf29c07590 ending contact
</code></pre><h2 id="exercises">Exercises</h2>
<ul>
<li>Modify the print statements in each collision callback to print out the coordinates where the entities&apos; fixtures are making contact. You can find the information you need to do this in the documentation for the contact table mentioned above.</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="02-09-modules-and-organization.html" class="navigation navigation-prev " aria-label="Previous page: 2.9 - Modules and organization">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="02-11-breakout-part-1.html" class="navigation navigation-next " aria-label="Next page: 2.11 - Breakout (part 1)">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"2.10 - Collision callbacks","level":"1.3.10","depth":2,"next":{"title":"2.11 - Breakout (part 1)","level":"1.3.11","depth":2,"path":"pages/02-11-breakout-part-1.md","ref":"pages/02-11-breakout-part-1.md","articles":[]},"previous":{"title":"2.9 - Modules and organization","level":"1.3.9","depth":2,"path":"pages/02-09-modules-and-organization.md","ref":"pages/02-09-modules-and-organization.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["graph"],"pluginsConfig":{"graph":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"pages/02-10-collision-callbacks.md","mtime":"2018-10-06T21:18:28.181Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-02-28T14:58:51.996Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

