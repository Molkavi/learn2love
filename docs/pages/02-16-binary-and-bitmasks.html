
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>2.16 - Binary and bitmasks · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="03-00-programming-in-depth.html" />
    
    
    <link rel="prev" href="02-15-breakout-part-5.html" />
    

    <script src="../gitbook/gitbook-plugin-graph/d3.min.js"></script>
    <script src="../gitbook/gitbook-plugin-graph/function-plot.js"></script>    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="01-00-programming-basics.html">
            
                <a href="01-00-programming-basics.html">
            
                    
                    1.0 - Programming basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="01-01-interactive-coding.html">
            
                <a href="01-01-interactive-coding.html">
            
                    
                    1.1 - Interactive coding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="01-02-strings.html">
            
                <a href="01-02-strings.html">
            
                    
                    1.2 - Strings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="01-03-nil-and-variables.html">
            
                <a href="01-03-nil-and-variables.html">
            
                    
                    1.3 - Nil and variables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="01-04-using-functions.html">
            
                <a href="01-04-using-functions.html">
            
                    
                    1.4 - Using functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="01-05-comments-in-code.html">
            
                <a href="01-05-comments-in-code.html">
            
                    
                    1.5 - Comments in code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="01-06-scripting-and-printing.html">
            
                <a href="01-06-scripting-and-printing.html">
            
                    
                    1.6 - Scripting and printing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="01-07-making-functions.html">
            
                <a href="01-07-making-functions.html">
            
                    
                    1.7 - Making functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="01-08-booleans.html">
            
                <a href="01-08-booleans.html">
            
                    
                    1.8 - Booleans
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="01-09-flow-control.html">
            
                <a href="01-09-flow-control.html">
            
                    
                    1.9 - Flow control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="01-10-while.html">
            
                <a href="01-10-while.html">
            
                    
                    1.10 - While
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.11" data-path="01-11-type-checking.html">
            
                <a href="01-11-type-checking.html">
            
                    
                    1.11 - Type checking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.12" data-path="01-12-first-game.html">
            
                <a href="01-12-first-game.html">
            
                    
                    1.12 - First game
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.13" data-path="01-13-tables-1.html">
            
                <a href="01-13-tables-1.html">
            
                    
                    1.13 - Tables (part 1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.14" data-path="01-14-tables-2.html">
            
                <a href="01-14-tables-2.html">
            
                    
                    1.14 - Tables (part 2)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.15" data-path="01-15-for-loops-1.html">
            
                <a href="01-15-for-loops-1.html">
            
                    
                    1.15 - For loops (part 1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.16" data-path="01-16-for-loops-2.html">
            
                <a href="01-16-for-loops-2.html">
            
                    
                    1.16 - For loops (part 2)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.17" data-path="01-17-scopes.html">
            
                <a href="01-17-scopes.html">
            
                    
                    1.17 - Scopes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.18" data-path="01-18-chapter-review.html">
            
                <a href="01-18-chapter-review.html">
            
                    
                    1.18 - Chapter review
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="02-00-introducing-love.html">
            
                <a href="02-00-introducing-love.html">
            
                    
                    2.0 - Introducing LÖVE
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="02-01-up-and-running.html">
            
                <a href="02-01-up-and-running.html">
            
                    
                    2.1 - Up and running
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="02-02-love-structure.html">
            
                <a href="02-02-love-structure.html">
            
                    
                    2.2 - LÖVE structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="02-03-geometry.html">
            
                <a href="02-03-geometry.html">
            
                    
                    2.3 - Geometry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="02-04-game-loop.html">
            
                <a href="02-04-game-loop.html">
            
                    
                    2.4 - Game loop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="02-05-delta-time.html">
            
                <a href="02-05-delta-time.html">
            
                    
                    2.5 - Delta time
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="02-06-mapping.html">
            
                <a href="02-06-mapping.html">
            
                    
                    2.6 - Mapping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="02-07-the-world.html">
            
                <a href="02-07-the-world.html">
            
                    
                    2.7 - The world
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="02-08-reading-documentation.html">
            
                <a href="02-08-reading-documentation.html">
            
                    
                    2.8 - Reading documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="02-09-modules-and-organization.html">
            
                <a href="02-09-modules-and-organization.html">
            
                    
                    2.9 - Modules and organization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="02-10-collision-callbacks.html">
            
                <a href="02-10-collision-callbacks.html">
            
                    
                    2.10 - Collision callbacks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="02-11-breakout-part-1.html">
            
                <a href="02-11-breakout-part-1.html">
            
                    
                    2.11 - Breakout (part 1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="02-12-breakout-part-2.html">
            
                <a href="02-12-breakout-part-2.html">
            
                    
                    2.12 - Breakout (part 2)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.13" data-path="02-13-breakout-part-3.html">
            
                <a href="02-13-breakout-part-3.html">
            
                    
                    2.13 - Breakout (part 3)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.14" data-path="02-14-breakout-part-4.html">
            
                <a href="02-14-breakout-part-4.html">
            
                    
                    2.14 - Breakout (part 4)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.15" data-path="02-15-breakout-part-5.html">
            
                <a href="02-15-breakout-part-5.html">
            
                    
                    2.15 - Breakout (part 5)
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.16" data-path="02-16-binary-and-bitmasks.html">
            
                <a href="02-16-binary-and-bitmasks.html">
            
                    
                    2.16 - Binary and bitmasks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="03-00-programming-in-depth.html">
            
                <a href="03-00-programming-in-depth.html">
            
                    
                    3.0 - Programming in-depth
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="03-01-primitives-and-references.html">
            
                <a href="03-01-primitives-and-references.html">
            
                    
                    3.01 - Primitives and references
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="03-02-higher-order-functions.html">
            
                <a href="03-02-higher-order-functions.html">
            
                    
                    3.02 - Higher-order functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="03-03-map-and-filter.html">
            
                <a href="03-03-map-and-filter.html">
            
                    
                    3.03 - Map and filter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="03-04-stack-and-recursion.html">
            
                <a href="03-04-stack-and-recursion.html">
            
                    
                    3.04 - Stack and recursion
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >2.16 - Binary and bitmasks</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="binary-and-bitmasks">Binary and bitmasks</h1>
<p>In <a href="02-10-collision-callbacks">2.10 - Collision callbacks</a> we saw how to react to entities colliding.
In this section we&apos;re going to discuss how we can better control when collisions happen.
As the title suggests, this will involve understanding some binary.</p>
<p>Let&apos;s say we have a beat-em-up game where two players are fighting bad guys and we don&apos;t want players to collide with each other and instead only collide with enemies.
The collision callback could look something like this:</p>
<pre><code class="lang-lua"><span class="hljs-keyword">local</span> begin_contact_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fixture_a, fixture_b)</span></span>
  <span class="hljs-keyword">local</span> entity_a_type = fixture_a:getUserData()
  <span class="hljs-keyword">local</span> entity_b_type = fixture_b:getUserData()
  <span class="hljs-comment">-- Check these aren&apos;t the same type of entity</span>
  <span class="hljs-keyword">if</span> entity_a_type ~= entity_b_type <span class="hljs-keyword">then</span>
    <span class="hljs-comment">-- Some code to handle the collision goes here...</span>

  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>But what if you had power-ups and you want players to collide with the power-ups but you don&apos;t want enemies touching the power-ups?
Things can get complicated pretty quickly:</p>
<pre><code class="lang-lua"><span class="hljs-keyword">local</span> begin_contact_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fixture_a, fixture_b)</span></span>
  <span class="hljs-keyword">local</span> a = fixture_a:getUserData()
  <span class="hljs-keyword">local</span> b = fixture_b:getUserData()
  <span class="hljs-keyword">if</span> (a == <span class="hljs-string">&apos;powerup&apos;</span> <span class="hljs-keyword">and</span> b == <span class="hljs-string">&apos;player&apos;</span>) <span class="hljs-keyword">or</span> (a == <span class="hljs-string">&apos;player&apos;</span> <span class="hljs-keyword">and</span> b == <span class="hljs-string">&apos;powerup&apos;</span>) <span class="hljs-keyword">then</span>
    <span class="hljs-comment">-- Some power-up code...</span>

  <span class="hljs-comment">-- Don&apos;t let power-ups collide with other entity types like bad guys</span>
  <span class="hljs-keyword">elseif</span> a ~= b <span class="hljs-keyword">and</span> a ~= <span class="hljs-string">&apos;powerup&apos;</span> <span class="hljs-keyword">and</span> b~= <span class="hljs-string">&apos;powerup&apos;</span> <span class="hljs-keyword">then</span>
    <span class="hljs-comment">-- Code to handle the rest of the collisions...</span>

  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Let&apos;s find a better way!</p>
<h2 id="binary-operations">Binary operations</h2>
<p>Back in <a href="01-00-programming-basics.html">1.0 - Programming basics</a> we discussed <em>operations</em>&#x2013; how to operate on strings with equality (<code>==</code>) checks, how to operate on numbers with arithmetic operations, and even how to perform <a href="01-08-booleans.html">boolean operations</a> like <code>and</code> and <code>or</code>.
Binary numbers have their own operations, often called bitwise operations.
To perform binary operations, let&apos;s first look at how to represent binary numbers.
Typing a number like <code>101</code>, Lua will interpret it as a decimal number (literally one-hundred one) so we need to represent it as a string and convert it to a number.
To convert a string to a number, you pass in the number and the base (base-2 in this case) like so:</p>
<pre><code class="lang-lua"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">tonumber</span>(<span class="hljs-string">&apos;101&apos;</span>, <span class="hljs-number">2</span>))
</code></pre>
<p>Which converts the binary number <code>101</code> to decimal when it prints out:</p>
<pre><code>5
</code></pre><p>For counting in binary and learning how to read and convert between binary and decimal, there are many resources that already explain it in much better.
Learning how to do the conversions isn&apos;t necessary to learning these basic binary operations, but is an essential skill to have in the field of computer science.</p>
<p>Moving on, let&apos;s take a look at some of the basic operations.</p>
<h3 id="and">AND</h3>
<p>Binary numbers are similar to booleans in that binary only has 1&apos;s and 0&apos;s.
The AND operator also works similarly to the boolean <code>and</code>.
You give it two digits and both must be <code>1</code> (<code>true</code>) for the output to be <code>1</code>.</p>
<p>Unfortunately at the time of writing this the online REPL has an outdated version of Lua that doesn&apos;t support binary operations.
No worries, let&apos;s create a <strong>main.lua</strong> file and try it out using L&#xD6;VE.
To perform binary operations, the included <code>&apos;bit&apos;</code> library must be loaded.
When required, it will return a table with many functions in it related to binary operations.
The first function we&apos;ll try, <code>bit.band()</code> performs a <strong>b</strong>inary <strong>AND</strong> operation.</p>
<pre><code class="lang-lua"><span class="hljs-keyword">local</span> bit = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;bit&apos;</span>)

<span class="hljs-built_in">print</span>(bit.band(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>))
<span class="hljs-built_in">print</span>(bit.band(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>))
<span class="hljs-built_in">print</span>(bit.band(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>))
<span class="hljs-built_in">print</span>(bit.band(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))
</code></pre>
<p>This will print to the debug console:</p>
<pre><code>0
0
0
1
</code></pre><p>You can pass it the decimals <code>1</code> and <code>0</code> as those numbers are the same in binary and decimal.</p>
<p>The operation is not limited to two inputs:</p>
<pre><code class="lang-lua"><span class="hljs-built_in">print</span>(bit.band(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>))
</code></pre>
<p>You can also pass it multi-digit numbers:</p>
<pre><code class="lang-lua"><span class="hljs-built_in">print</span>(bit.band(
  <span class="hljs-built_in">tonumber</span>(<span class="hljs-string">&apos;111&apos;</span>, <span class="hljs-number">2</span>),
  <span class="hljs-built_in">tonumber</span>(<span class="hljs-string">&apos;101&apos;</span>, <span class="hljs-number">2</span>)
))
</code></pre>
<p>Note that you need to always use <code>tonumber()</code> to convert your binary string to a number as the function always expects a decimal number.
Likewise the output will always be a decimal number:</p>
<pre><code>5
</code></pre><p>Lay it out like an arithmetic table and you can solve it just as easily:</p>
<pre><code>  111
  101
  ---
  101 --&gt; 5


  11011010
  10111100
  --------
  10011000 --&gt; 152
</code></pre><h3 id="or">OR</h3>
<p>Like with the boolean <code>or</code>, the binary OR output will be <code>1</code> if either the first <strong>or</strong> the second number is 1.
You could say it is the least picky operator in that it doesn&apos;t care as long as it gets a 1 somewhere at least once.</p>
<pre><code class="lang-lua"><span class="hljs-comment">-- main.lua</span>
<span class="hljs-keyword">local</span> bit = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;bit&apos;</span>)

<span class="hljs-built_in">print</span>(bit.bor(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))
<span class="hljs-built_in">print</span>(bit.bor(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>))
<span class="hljs-built_in">print</span>(bit.bor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>))
<span class="hljs-built_in">print</span>(bit.bor(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>))
</code></pre>
<pre><code>1
1
0
1
</code></pre><h3 id="xor">XOR</h3>
<p>Xor (e<strong>x</strong>clusive <strong>or</strong>), returns 1 only when it gets one 1.
Let&apos;s compare XOR in a table to the others:</p>
<p><strong>AND</strong></p>
<table>
<thead>
<tr>
<th>input A</th>
<th>input B</th>
<th>output</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p><strong>OR</strong></p>
<table>
<thead>
<tr>
<th>input A</th>
<th>input B</th>
<th>output</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p><strong>XOR</strong></p>
<table>
<thead>
<tr>
<th>input A</th>
<th>input B</th>
<th>output</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>Binary operations are some of the most fundamental computer operations and can be physically built with <a href="http://hyperphysics.phy-astr.gsu.edu/hbase/Electronic/trangate.html" target="_blank">a few transistors</a>.
Given the simplicity of these operations, it also makes for a fast method of calculating collisions.</p>
<h2 id="bitmasks">Bitmasks</h2>
<p><img src="../images/02-16-collision-colored.png" alt=""></p>
<p>Let&apos;s take a look at this scene for a moment and identify from the crudely drawn shapes some potential entities:</p>
<p><img src="../images/02-16-collision-labeled.png" alt=""></p>
<p>All these entities fall into unique categories in that we want each of them to collide with certain other entities.
If this were a game, we&apos;d define each category with a unique binary digit, or bit, so let&apos;s first do that:</p>
<table>
<thead>
<tr>
<th>entity</th>
<th>category</th>
</tr>
</thead>
<tbody>
<tr>
<td>sun</td>
<td>0000</td>
</tr>
<tr>
<td>player</td>
<td>0001</td>
</tr>
<tr>
<td>powerup</td>
<td>0010</td>
</tr>
<tr>
<td>enemy</td>
<td>0100</td>
</tr>
<tr>
<td>ground</td>
<td>1000</td>
</tr>
</tbody>
</table>
<p>Let&apos;s set some rules for each of these entities.
For instance, we want the player to collide with the powerup (0010), enemy (0100), and of course the ground (1000).
To tell the game engine this, we create a <em>bitmask</em> for the fixture.
This is a binary number with all the bits switched on that we want the entity to collide with.
In other words, the player&apos;s bitmask would be (1110).
We left the first bit blank so that the player can&apos;t collide with other potential players (player 2).
Let&apos;s update the table with the bitmask we want each entity to have:</p>
<table>
<thead>
<tr>
<th>entity</th>
<th>category</th>
<th>bitmask</th>
</tr>
</thead>
<tbody>
<tr>
<td>sun</td>
<td>0000</td>
<td>0000</td>
</tr>
<tr>
<td>player</td>
<td>0001</td>
<td>1110</td>
</tr>
<tr>
<td>powerup</td>
<td>0010</td>
<td>1001</td>
</tr>
<tr>
<td>enemy</td>
<td>0100</td>
<td>1001</td>
</tr>
<tr>
<td>ground</td>
<td>1000</td>
<td>1111</td>
</tr>
</tbody>
</table>
<p>So how does it all come together and work?
When two entity&apos;s fixtures contact, a binary AND operation is performed again the entity&apos;s bitmask and the other entity&apos;s category.
If the resulting number isn&apos;t 0000 then we have a collision.
Take the player and enemy for instance:</p>
<pre><code>0001   player&apos;s category
1001   enemy&apos;s bitmask
----
0001   we have a collision
</code></pre><p>And how about the enemy and the powerup:</p>
<pre><code>0100   enemy&apos;s category
1001   powerup&apos;s bitmask
----
0000   we have NO collision
</code></pre><p>Armed with this knowledge, we can assert the following information from the table above:</p>
<ul>
<li>The sun collides with nothing (and doesn&apos;t even get a category). It&apos;s just in the background and non-interactive.</li>
<li>The player collides with everything except other players (and of course the sun).</li>
<li>The powerup collides only with the ground and players.</li>
<li>The enemy collides only with the ground and players.</li>
<li>The ground collides with everything.</li>
</ul>
<p>Go into the code folder and run the &quot;collision&quot; game:</p>
<p><a href="https://github.com/RVAGameJams/learn2love/tree/master/code/collision" target="_blank">https://github.com/RVAGameJams/learn2love/tree/master/code/collision</a></p>
<p>Do the entities interact as expected?
Take a look inside the <em>entities</em> folder to see the particular function being called to accomplish apply the categories and bitmasks to each entity&#x2013; <a href="https://love2d.org/wiki/Fixture:setFilterData" target="_blank">Fixture:setFilterData</a></p>
<pre><code class="lang-lua"><span class="hljs-comment">-- square.lua</span>
...
square.category = <span class="hljs-built_in">tonumber</span>(<span class="hljs-string">&apos;0001&apos;</span>, <span class="hljs-number">2</span>)
square.mask = <span class="hljs-built_in">tonumber</span>(<span class="hljs-string">&apos;1110&apos;</span>, <span class="hljs-number">2</span>)
square.group = <span class="hljs-number">0</span>
...
square.fixture:setFilterData(square.category, square.mask, square.group)
</code></pre>
<p>The examples above only use 4 bits for the category and mask bceause that&apos;s all we needed, however L&#xD6;VE supports up to 16 bits for the category and bitmask (<code>0000000000000000</code>).
The <em>group</em> property isn&apos;t used and should be set to 0 when it isn&apos;t.
We haven&apos;t mentioned groups before because if you know how to use categories and bitmasks then you don&apos;t need to use groups as categories and bitmasks offer a more powerful way of doing the same thing.
That being said, collision groups should be relatively straight-forward to learn about so it will be left up as an exercise to read and study.</p>
<h2 id="exercises">Exercises</h2>
<ul>
<li>Play with the bitmasks. Can you make the enemy collide with the powerup instead of the player?</li>
<li>Take a look at how groups work as described in <a href="https://love2d.org/wiki/Fixture:setGroupIndex" target="_blank">Fixture:setGroupIndex</a>. How can you create collision rules using groups instead of setting the bitmask and category? What are the advantages of each method?</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="02-15-breakout-part-5.html" class="navigation navigation-prev " aria-label="Previous page: 2.15 - Breakout (part 5)">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="03-00-programming-in-depth.html" class="navigation navigation-next " aria-label="Next page: 3.0 - Programming in-depth">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"2.16 - Binary and bitmasks","level":"1.3.16","depth":2,"next":{"title":"3.0 - Programming in-depth","level":"1.4","depth":1,"path":"pages/03-00-programming-in-depth.md","ref":"pages/03-00-programming-in-depth.md","articles":[{"title":"3.01 - Primitives and references","level":"1.4.1","depth":2,"path":"pages/03-01-primitives-and-references.md","ref":"pages/03-01-primitives-and-references.md","articles":[]},{"title":"3.02 - Higher-order functions","level":"1.4.2","depth":2,"path":"pages/03-02-higher-order-functions.md","ref":"pages/03-02-higher-order-functions.md","articles":[]},{"title":"3.03 - Map and filter","level":"1.4.3","depth":2,"path":"pages/03-03-map-and-filter.md","ref":"pages/03-03-map-and-filter.md","articles":[]},{"title":"3.04 - Stack and recursion","level":"1.4.4","depth":2,"path":"pages/03-04-stack-and-recursion.md","ref":"pages/03-04-stack-and-recursion.md","articles":[]}]},"previous":{"title":"2.15 - Breakout (part 5)","level":"1.3.15","depth":2,"path":"pages/02-15-breakout-part-5.md","ref":"pages/02-15-breakout-part-5.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["graph"],"pluginsConfig":{"graph":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"pages/02-16-binary-and-bitmasks.md","mtime":"2019-02-28T14:55:15.543Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-02-28T14:58:51.996Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

