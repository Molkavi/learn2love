
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>2.9 - Modules and organization · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="02-10-collision-callbacks.html" />
    
    
    <link rel="prev" href="02-08-reading-documentation.html" />
    

    <script src="../gitbook/gitbook-plugin-graph/d3.min.js"></script>
    <script src="../gitbook/gitbook-plugin-graph/function-plot.js"></script>    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="01-00-programming-basics.html">
            
                <a href="01-00-programming-basics.html">
            
                    
                    1.0 - Programming basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="01-01-interactive-coding.html">
            
                <a href="01-01-interactive-coding.html">
            
                    
                    1.1 - Interactive coding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="01-02-strings.html">
            
                <a href="01-02-strings.html">
            
                    
                    1.2 - Strings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="01-03-nil-and-variables.html">
            
                <a href="01-03-nil-and-variables.html">
            
                    
                    1.3 - Nil and variables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="01-04-using-functions.html">
            
                <a href="01-04-using-functions.html">
            
                    
                    1.4 - Using functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="01-05-comments-in-code.html">
            
                <a href="01-05-comments-in-code.html">
            
                    
                    1.5 - Comments in code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="01-06-scripting-and-printing.html">
            
                <a href="01-06-scripting-and-printing.html">
            
                    
                    1.6 - Scripting and printing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="01-07-making-functions.html">
            
                <a href="01-07-making-functions.html">
            
                    
                    1.7 - Making functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="01-08-booleans.html">
            
                <a href="01-08-booleans.html">
            
                    
                    1.8 - Booleans
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="01-09-flow-control.html">
            
                <a href="01-09-flow-control.html">
            
                    
                    1.9 - Flow control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="01-10-while.html">
            
                <a href="01-10-while.html">
            
                    
                    1.10 - While
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.11" data-path="01-11-type-checking.html">
            
                <a href="01-11-type-checking.html">
            
                    
                    1.11 - Type checking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.12" data-path="01-12-first-game.html">
            
                <a href="01-12-first-game.html">
            
                    
                    1.12 - First game
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.13" data-path="01-13-tables-1.html">
            
                <a href="01-13-tables-1.html">
            
                    
                    1.13 - Tables (part 1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.14" data-path="01-14-tables-2.html">
            
                <a href="01-14-tables-2.html">
            
                    
                    1.14 - Tables (part 2)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.15" data-path="01-15-for-loops-1.html">
            
                <a href="01-15-for-loops-1.html">
            
                    
                    1.15 - For loops (part 1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.16" data-path="01-16-for-loops-2.html">
            
                <a href="01-16-for-loops-2.html">
            
                    
                    1.16 - For loops (part 2)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.17" data-path="01-17-scopes.html">
            
                <a href="01-17-scopes.html">
            
                    
                    1.17 - Scopes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.18" data-path="01-18-chapter-review.html">
            
                <a href="01-18-chapter-review.html">
            
                    
                    1.18 - Chapter review
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="02-00-introducing-love.html">
            
                <a href="02-00-introducing-love.html">
            
                    
                    2.0 - Introducing LÖVE
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="02-01-up-and-running.html">
            
                <a href="02-01-up-and-running.html">
            
                    
                    2.1 - Up and running
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="02-02-love-structure.html">
            
                <a href="02-02-love-structure.html">
            
                    
                    2.2 - LÖVE structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="02-03-geometry.html">
            
                <a href="02-03-geometry.html">
            
                    
                    2.3 - Geometry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="02-04-game-loop.html">
            
                <a href="02-04-game-loop.html">
            
                    
                    2.4 - Game loop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="02-05-delta-time.html">
            
                <a href="02-05-delta-time.html">
            
                    
                    2.5 - Delta time
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="02-06-mapping.html">
            
                <a href="02-06-mapping.html">
            
                    
                    2.6 - Mapping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="02-07-the-world.html">
            
                <a href="02-07-the-world.html">
            
                    
                    2.7 - The world
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="02-08-reading-documentation.html">
            
                <a href="02-08-reading-documentation.html">
            
                    
                    2.8 - Reading documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.9" data-path="02-09-modules-and-organization.html">
            
                <a href="02-09-modules-and-organization.html">
            
                    
                    2.9 - Modules and organization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="02-10-collision-callbacks.html">
            
                <a href="02-10-collision-callbacks.html">
            
                    
                    2.10 - Collision callbacks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="02-11-breakout-part-1.html">
            
                <a href="02-11-breakout-part-1.html">
            
                    
                    2.11 - Breakout (part 1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="02-12-breakout-part-2.html">
            
                <a href="02-12-breakout-part-2.html">
            
                    
                    2.12 - Breakout (part 2)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.13" data-path="02-13-breakout-part-3.html">
            
                <a href="02-13-breakout-part-3.html">
            
                    
                    2.13 - Breakout (part 3)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.14" data-path="02-14-breakout-part-4.html">
            
                <a href="02-14-breakout-part-4.html">
            
                    
                    2.14 - Breakout (part 4)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.15" data-path="02-15-breakout-part-5.html">
            
                <a href="02-15-breakout-part-5.html">
            
                    
                    2.15 - Breakout (part 5)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.16" data-path="02-16-binary-and-bitmasks.html">
            
                <a href="02-16-binary-and-bitmasks.html">
            
                    
                    2.16 - Binary and bitmasks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.17" data-path="02-17-networking-part-1.html">
            
                <a href="02-17-networking-part-1.html">
            
                    
                    2.17 - Networking (part 1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.18" data-path="02-18-networking-part-2.html">
            
                <a href="02-18-networking-part-2.html">
            
                    
                    2.18 - Networking (part 2)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="03-00-programming-in-depth.html">
            
                <a href="03-00-programming-in-depth.html">
            
                    
                    3.0 - Programming in-depth
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="03-01-primitives-and-references.html">
            
                <a href="03-01-primitives-and-references.html">
            
                    
                    3.01 - Primitives and references
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="03-02-higher-order-functions.html">
            
                <a href="03-02-higher-order-functions.html">
            
                    
                    3.02 - Higher-order functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="03-03-map-and-filter.html">
            
                <a href="03-03-map-and-filter.html">
            
                    
                    3.03 - Map and filter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="03-04-stack-and-recursion.html">
            
                <a href="03-04-stack-and-recursion.html">
            
                    
                    3.04 - Stack and recursion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="03-05-reduce.html">
            
                <a href="03-05-reduce.html">
            
                    
                    3.05 - Reduce
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >2.9 - Modules and organization</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="modules-and-organization">Modules and organization</h1>
<p>Eventually when you start writing real programs, you realize if you keep all the code in one file that things can get a bit messy.
Putting your code in separate files helps you not only keep your different pieces of code separated from each other, but it helps you visualize the structure of your program.</p>
<p>Let&apos;s start with a single <em>main.lua</em> file and we&apos;ll then split it into different files:</p>
<pre><code class="lang-lua"><span class="hljs-keyword">local</span> my_cool_functon = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  love.graphics.<span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;This function came from function-module.lua&apos;</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> my_cool_table = {}
my_cool_table.print_stuff = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  love.graphics.<span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;This function came from table-module.lua&apos;</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;my_cool_function is&apos;</span>, my_cool_function)
<span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;my_cool_table is&apos;</span>, my_cool_table)
</code></pre>
<p>When we go to run the code, we get a blank window because we&apos;re not drawing anything.
We do see our print statements output our function and table to the console though:</p>
<pre><code>my_cool_function is     function: 0x41f2abc0
my_cool_table is        table: 0x41f2aa08
</code></pre><h2 id="modules-and-require">Modules and <code>require</code></h2>
<p>Think of your Lua files as giant functions that get invoked whenever you load the file.
Just like a function, you can <em>return</em> values from your files.
If you load one Lua file from another, you will get whatever value is returned.
Let&apos;s modify our previous code.
First define these two new files in the game folder:</p>
<p><strong>function-module.lua</strong></p>
<pre><code class="lang-lua"><span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  love.graphics.<span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;This function came from function-module.lua&apos;</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>)
<span class="hljs-keyword">end</span>
</code></pre>
<p><strong>table-module.lua</strong></p>
<pre><code class="lang-lua"><span class="hljs-keyword">local</span> my_cool_table = {}
my_cool_table.print_stuff = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  love.graphics.<span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;This function came from table-module.lua&apos;</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">return</span> my_cool_table
</code></pre>
<p>Then update <strong>main.lua</strong>:</p>
<pre><code class="lang-lua"><span class="hljs-keyword">local</span> function_module = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;function-module&apos;</span>)
<span class="hljs-keyword">local</span> table_module = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;table-module&apos;</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;function_module is&apos;</span>, function_module)
<span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;table_module is&apos;</span>, table_module)
</code></pre>
<p>Let&apos;s start from the top.
In <em>function-module.lua</em> we write a return statement that returns a function with no name.
We don&apos;t invoke the function, we just return it as a value the same way a function may return a number or string.
Likewise in <em>table-module.lua</em> we defined a table (with a function in it) and returned the table on the last line of the file.
The function name and local variable name <code>my_cool_table</code> is inconsequential and can&apos;t be seen outside the <em>table-module.lua</em> file as modules have their own <a href="01-17-scopes.html">scope</a>.</p>
<p>In <em>main.lua</em> we are <em>requiring</em> function-module using a built-in Lua function, <code>require</code>.
<code>require</code> takes one argument, a string that equals the name of your file and it then invokes that file and returns back a function which we assign to a new variable <code>function_module</code>.
We then do the same thing for <em>table-module.lua</em>. We require it, which invokes it and returns back whatever that file returns.
In this case is a table.
Notice that when we pass in the filenames as arguments we just give the first part of the filename without the extension &quot;.lua&quot; at the end.
This function expects that any file it is requiring is a Lua file.</p>
<p>After we required the files, we printed the values of those variables, so you should see the results of the print statements appear in the console like before:</p>
<pre><code>function_module is      function: 0x40479548
table_module is table: 0x40479bc8
</code></pre><p>We pulled in the return values from the other two files into our <em>main.lua</em> file and printed the values, but since we didn&apos;t invoke the functions from those two files then we got a blank game window when running the program.
Let&apos;s define a <code>love.draw</code> in <em>main.lua</em> like before and invoke the functions we got back from both modules:</p>
<pre><code class="lang-lua"><span class="hljs-keyword">local</span> function_module = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;function-module&apos;</span>)
<span class="hljs-keyword">local</span> table_module = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;table-module&apos;</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;function_module is&apos;</span>, function_module)
<span class="hljs-built_in">print</span>(<span class="hljs-string">&apos;table_module is&apos;</span>, table_module)

love.draw = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  function_module()
  table_module.print_stuff()
<span class="hljs-keyword">end</span>
</code></pre>
<p>We were able to invoke the functions and use the returned data as if it were all in the same file.</p>
<h2 id="organizing-modules">Organizing modules</h2>
<p>It may help to see a real example of using modules in a game, so let&apos;s take our previous game code from <a href="pages/02-08-reading-documentation.md">2.8 - Reading documentation</a> and see how we can separate out functionality.
The first thing we did in our game was define a world, so let&apos;s start by putting our world-related code in a dedicated file named <strong>world.lua</strong>:</p>
<pre><code class="lang-lua"><span class="hljs-comment">-- world.lua</span>

<span class="hljs-keyword">local</span> world = love.physics.newWorld(<span class="hljs-number">0</span>, <span class="hljs-number">9.81</span> * <span class="hljs-number">128</span>)

<span class="hljs-keyword">return</span> world
</code></pre>
<p>Remember that you need the return statement at the end of your files or else the code will return <code>nil</code> when you go to require it and this could cause all kinds of unexepcted errors when you run it.
Next let&apos;s create a folder named <strong>entities</strong> that we can keep all our game entities in.
We plan on creating more entities so it will help to keep them all together.
In the entities folder, create a file and name it <strong>triangle.lua</strong>.
We&apos;ll cut all the code from the original main.lua that related to our triangle entity and put it here:</p>
<pre><code class="lang-lua"><span class="hljs-comment">-- entities/triangle.lua</span>

<span class="hljs-keyword">local</span> world = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;world&apos;</span>)

<span class="hljs-keyword">local</span> triangle = {}
triangle.body = love.physics.newBody(world, <span class="hljs-number">200</span>, <span class="hljs-number">200</span>, <span class="hljs-string">&apos;dynamic&apos;</span>)
triangle.body.setMass(triangle.body, <span class="hljs-number">32</span>)
triangle.shape = love.physics.newPolygonShape(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">200</span>)
triangle.fixture = love.physics.newFixture(triangle.body, triangle.shape)
triangle.fixture:setRestitution(<span class="hljs-number">0.75</span>)

<span class="hljs-keyword">return</span> triangle
</code></pre>
<p>Notice how we are requiring the <code>world</code> table from world.lua, because we need to access that table in this entity&apos;s file so we can add the entity to the world.
We also need to do the same thing as above with the <strong>bar</strong> entity:</p>
<pre><code class="lang-lua"><span class="hljs-comment">-- entities/bar.lua</span>

<span class="hljs-keyword">local</span> world = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;world&apos;</span>)

<span class="hljs-keyword">local</span> bar = {}
bar.body = love.physics.newBody(world, <span class="hljs-number">200</span>, <span class="hljs-number">450</span>, <span class="hljs-string">&apos;static&apos;</span>)
bar.shape = love.physics.newPolygonShape(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">20</span>, <span class="hljs-number">400</span>, <span class="hljs-number">20</span>, <span class="hljs-number">400</span>, <span class="hljs-number">0</span>)
bar.fixture = love.physics.newFixture(bar.body, bar.shape)

<span class="hljs-keyword">return</span> bar
</code></pre>
<p>Now our <strong>main.lua</strong> should only contain our key map and <code>love</code> functions:</p>
<pre><code class="lang-lua"><span class="hljs-comment">-- main.lua</span>

<span class="hljs-keyword">local</span> bar = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;entities/bar&apos;</span>)
<span class="hljs-keyword">local</span> triangle = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;entities/triangle&apos;</span>)
<span class="hljs-keyword">local</span> world = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;world&apos;</span>)

<span class="hljs-comment">-- Boolean to keep track of whether our game is paused or not</span>
<span class="hljs-keyword">local</span> paused = <span class="hljs-keyword">false</span>

<span class="hljs-keyword">local</span> key_map = {
  escape = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
    love.event.quit()
  <span class="hljs-keyword">end</span>,
  space = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
    paused = <span class="hljs-keyword">not</span> paused
  <span class="hljs-keyword">end</span>
}

love.draw = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  love.graphics.polygon(<span class="hljs-string">&apos;line&apos;</span>, triangle.body:getWorldPoints(triangle.shape:getPoints()))
  love.graphics.polygon(<span class="hljs-string">&apos;line&apos;</span>, bar.body:getWorldPoints(bar.shape:getPoints()))
<span class="hljs-keyword">end</span>

love.focus = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(focused)</span></span>
  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> focused <span class="hljs-keyword">then</span>
    paused = <span class="hljs-keyword">true</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

love.keypressed = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(pressed_key)</span></span>
  <span class="hljs-comment">-- Check in the key map if there is a function</span>
  <span class="hljs-comment">-- that matches this pressed key&apos;s name</span>
  <span class="hljs-keyword">if</span> key_map[pressed_key] <span class="hljs-keyword">then</span>
    key_map[pressed_key]()
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

love.update = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(dt)</span></span>
  world:update(dt)
<span class="hljs-keyword">end</span>
</code></pre>
<p>Our two entities and world get pulled into main.lua and everything should run exactly as before.
One thing to note is that even though we require world.lua 3 times in our code, it is the same world and not 3 copies.
This is because Lua knows to only run a module the first time you require it and not invoke it again.
Once it runs the first time, the returned results are stored in memory for the next time you try to require it.
We can prove this by adding a print statement to <strong>world.lua</strong>:</p>
<pre><code class="lang-lua"><span class="hljs-comment">-- world.lua</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;This is the world&quot;</span>)

<span class="hljs-keyword">local</span> world = love.physics.newWorld(<span class="hljs-number">0</span>, <span class="hljs-number">9.81</span> * <span class="hljs-number">128</span>)

<span class="hljs-keyword">return</span> world
</code></pre>
<p>How many times does <code>&quot;This is the world&quot;</code> get printed to the console?</p>
<h2 id="exercises">Exercises</h2>
<ul>
<li>Try creating two new modules; One that returns a string and one that returns a number.</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="02-08-reading-documentation.html" class="navigation navigation-prev " aria-label="Previous page: 2.8 - Reading documentation">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="02-10-collision-callbacks.html" class="navigation navigation-next " aria-label="Next page: 2.10 - Collision callbacks">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"2.9 - Modules and organization","level":"1.3.9","depth":2,"next":{"title":"2.10 - Collision callbacks","level":"1.3.10","depth":2,"path":"pages/02-10-collision-callbacks.md","ref":"pages/02-10-collision-callbacks.md","articles":[]},"previous":{"title":"2.8 - Reading documentation","level":"1.3.8","depth":2,"path":"pages/02-08-reading-documentation.md","ref":"pages/02-08-reading-documentation.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["graph"],"pluginsConfig":{"graph":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"pages/02-09-modules-and-organization.md","mtime":"2018-08-26T02:11:44.367Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-01-28T02:06:31.821Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

